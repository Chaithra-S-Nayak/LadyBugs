version: "2"
name: "Opportunity Summarizer"
description: "Generate a summary report of opportunities within the specified timeframe."

service_account:
  display_name: DevRev Bot

keyrings:
  organization:
    - name: slack_oauth_token
      display_name: Slack OAuth Token
      description: OAuth token to authenticate Slack API requests.
      types:
        - snap_in_secret
    - name: llm_api_token
      display_name: LLM API Token
      description: Token to authenticate with the shared LLM model.
      types:
        - snap_in_secret

functions:
  - name: generate_report
    description: Function to trigger on /report command

commands:
  - name: report
    namespace: devrev
    description: Create a summary report of opportunities with charts.
    surfaces:
      - surface: discussions
        object_types:
          - opportunity
          - issue
          - ticket
    usage_hint: "[channel] [nd] [nh] [color]"
    function: generate_report
